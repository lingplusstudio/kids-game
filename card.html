<!DOCTYPE html>
<html lang="zh-Hant">
<head>
V2
    <meta charset="UTF-8">
    <title>æ³¨éŸ³ç¬¦è™Ÿå¤§å†’éšª</title>
    <style>
        body { font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; background-color: #E1F5FE; text-align: center; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 30px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .main-title { color: #0288D1; font-size: 2.8rem; margin-bottom: 10px; }
        .sub-title { color: #4FC3F7; font-size: 1.2rem; margin-bottom: 25px; }
        
        /* é¡¯ç¤ºå€ï¼šä¿®æ­£åˆå§‹æ–‡å­—éå¤§å•é¡Œ */
        #display-area { 
            font-size: 3rem; /* åˆå§‹æ–‡å­—è¼ƒå° */
            margin: 30px auto; height: 180px; width: 80%;
            display: flex; align-items: center; justify-content: center; 
            color: #0288D1; border: 5px dashed #B3E5FC; border-radius: 20px;
            transition: font-size 0.2s; /* é»æ“Šæ™‚æ”¾å¤§çš„å‹•ç•« */
        }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 15px; padding: 20px; }
        .bo-btn { 
            aspect-ratio: 1; font-size: 2.5rem; cursor: pointer; border: none; 
            border-radius: 15px; background: #B3E5FC; color: #01579B;
            box-shadow: 0 5px #81D4FA; transition: 0.2s;
        }
        .bo-btn:active { transform: translateY(4px); box-shadow: 0 2px #81D4FA; }
        .bo-btn.vowel { background: #FFCC80; color: #E65100; box-shadow: 0 5px #FFB74D; }
/* æ‹¼éŸ³å¤§å¸«å°ˆå±¬ï¼šç´«è‰²å¤§å›é¦–é éˆ• */
    .home-btn-large {
        position: fixed;
        top: 20px;
        left: 20px;
        width: 85px;
        height: 85px;
        background-color: #9C27B0; /* ç´«è‰² */
        color: white;
        text-decoration: none;
        border-radius: 25px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px #7B1FA2;
        transition: 0.2s;
        z-index: 9999;
        font-weight: bold;
    }

    .home-btn-large span {
        font-size: 2.2rem;
        margin-bottom: -5px;
    }

    .home-text {
        font-size: 1rem;
    }

    .home-btn-large:hover {
        transform: scale(1.1);
        filter: brightness(1.1);
    }

    .home-btn-large:active {
        transform: translateY(4px);
        box-shadow: 0 4px #7B1FA2;
    }

    /* ç¢ºä¿æ‰‹æ©Ÿç‰ˆæ¨™é¡Œä¸æœƒè¢«æŒ‰éˆ•å£“åˆ° */
    @media (max-width: 600px) {
        .container { margin-top: 100px; }
    }
/* ç•¶ iPad ç›´è‘—æ‹¿æ™‚ */
@media (orientation: portrait) {
    .container {
        flex-direction: column; /* è®“å…§å®¹ä¸Šä¸‹æ’åˆ— */
    }
    .main-char {
        font-size: 15rem; /* å­—æ¯å¯ä»¥æ”¾å¾—è·Ÿè‡‰ä¸€æ¨£å¤§ */
        margin-top: 20vh;
    }
}
    </style>
</head>
<body>
<a href="index.html" class="home-btn-large">
    <span>ğŸ </span>
    <div class="home-text">é¦–é </div>
</a>
<div class="container">
    <h1 class="main-title">ã„…ã„†ã„‡ æ³¨éŸ³å¤§å†’éšª</h1>
    <p class="sub-title">é»é»çœ‹ï¼Œè·Ÿè‘—è²éŸ³ä¸€èµ·å”¸å”¸çœ‹å–”ï¼</p>
    
    <div id="display-area">ğŸŒŸ é¸ä¸€å€‹æ³¨éŸ³ ğŸŒŸ</div>

    <div class="grid" id="bopomofo-grid"></div>
</div>

<script>
    const bopomofo = [
        'ã„…','ã„†','ã„‡','ã„ˆ','ã„‰','ã„Š','ã„‹','ã„Œ','ã„','ã„','ã„',
        'ã„','ã„‘','ã„’','ã„“','ã„”','ã„•','ã„–','ã„—','ã„˜','ã„™',
        'ã„§','ã„¨','ã„©','ã„š','ã„›','ã„œ','ã„','ã„','ã„Ÿ','ã„ ','ã„¡','ã„¢','ã„£','ã„¤','ã„¥','ã„¦'
    ];

    const grid = document.getElementById('bopomofo-grid');
    const display = document.getElementById('display-area');

    bopomofo.forEach((char, index) => {
        const btn = document.createElement('button');
        btn.innerText = char;
        btn.className = 'bo-btn';
        if (index >= 21) btn.classList.add('vowel');

        btn.onclick = () => {
            // åˆ‡æ›ç‚ºå¤§å­—é«”
            display.innerText = char;
            display.style.fontSize = "10rem"; 
            
            // å›åˆ°ç¬¬ä¸€ç‰ˆçš„ç™¼éŸ³æ–¹å¼ï¼šç›´æ¥è®€æ³¨éŸ³
            speak(char);
        };
        grid.appendChild(btn);
    });

   é€™æ˜¯ä¸€å€‹éå¸¸å…¸å‹çš„ Web Speech API åœ¨ä¸åŒç³»çµ±ä¸‹çš„è©®é‡‹å•é¡Œã€‚å¦³çš„ç¨‹å¼ç¢¼é›–ç„¶å·²ç¶“å¯«äº† t + "ã„œ" ä¾†ä¿®æ­£ï¼Œä½†æœ‰äº›ç‰ˆæœ¬çš„ iPad èªéŸ³å¼•æ“å°ã€Œæ³¨éŸ³ç¬¦è™Ÿã€çš„å„ªå…ˆæ¬Šæ¥µé«˜ï¼Œå®ƒåªè¦çœ‹åˆ°ã€Œã„…ã€é€™å€‹å­—ï¼Œå°±æœƒç«‹åˆ»è·³è½‰åˆ°å®ƒå…§å»ºçš„ã€Œã„…ã„›ã€ç™¼éŸ³ï¼Œç”šè‡³ç„¡è¦–å¦³å¾Œé¢åŠ çš„ã€Œã„œã€ã€‚

æ­¤å¤–ï¼Œæˆ‘ç™¼ç¾å¦³çš„ç¨‹å¼ç¢¼æœ€å¾Œå¤šå‡ºäº†ä¸€æ®µé‡è¤‡ä¸”éŒ¯èª¤çš„ msg.text é‚è¼¯ï¼Œé€™æœƒå°è‡´ç™¼éŸ³è¡çªã€‚

ğŸ› ï¸ é‡å° iPad ã€Œã„…ã„›ã€éŸ³çš„çµ‚æ¥µè§£æ±ºæ–¹æ¡ˆ
è¦ç ´è§£ iPad å…§å»ºçš„å¼·åˆ¶ç™¼éŸ³ï¼Œæœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ ã€ŒæŠŠæ³¨éŸ³è®Šæˆæ‹¼éŸ³ã€ äº¤çµ¦å®ƒã€‚å° iPad çš„ zh-TW èªéŸ³ä¾†èªªï¼Œå‚³é€æ‹¼éŸ³å­—ä¸²ï¼ˆå¦‚ "be"ï¼‰å¾€å¾€æ¯”å‚³é€æ³¨éŸ³ç¬¦è™Ÿæ›´èƒ½ç™¼å‡ºæ¸…è„†çš„è²æ¯éŸ³ã€‚

è«‹ç›´æ¥å°‡å¦³çš„ speak å‡½æ•¸æ›¿æ›æˆé€™æ®µ ã€Œæ³¨éŸ³è½‰æ‹¼éŸ³ã€ å¼·åˆ¶ä¿®æ­£ç‰ˆï¼š

JavaScript
    function speak(t) {
        window.speechSynthesis.cancel();
        
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        let processedText = t;

        // ğŸŒŸ å°ä»˜ iPad çš„ã€Œæ³¨éŸ³è½‰æ‹¼éŸ³ã€å°ç…§è¡¨
        const bopomofoToPinyin = {
            "ã„…": "be", "ã„†": "pe", "ã„‡": "me", "ã„ˆ": "fe",
            "ã„‰": "de", "ã„Š": "te", "ã„‹": "ne", "ã„Œ": "le",
            "ã„": "ge", "ã„": "ke", "ã„": "he",
            "ã„": "ji", "ã„‘": "qi", "ã„’": "xi",
            "ã„“": "zhi", "ã„”": "chi", "ã„•": "shi", "ã„–": "ri",
            "ã„—": "zi", "ã„˜": "ci", "ã„™": "si"
        };

        // å¦‚æœæ˜¯ iOS ä¸”åœ¨æ¸…å–®ä¸­ï¼Œç›´æ¥é¤µå®ƒæ‹¼éŸ³ï¼Œå¼·åˆ¶å®ƒç™¼å‡ºã€Œã„œã€çš„å°¾éŸ³
        if (isIOS && bopomofoToPinyin[t]) {
            processedText = bopomofoToPinyin[t];
        } else if (isIOS && ["ã„§", "ã„¨", "ã„©"].includes(t)) {
            // è™•ç†ä»‹ç¬¦ï¼Œç¨å¾®æ‹‰é•·ä¸€é»é»
            processedText = t + " ";
        }

        const m = new SpeechSynthesisUtterance(processedText);
        m.lang = 'zh-TW';
        
        // ğŸŒŸ èªé€Ÿç¨å¾®èª¿å¿«ä¸€é»é» (0.9)ï¼Œå¯ä»¥è®“ã€Œã„…ã„›ã€æ„Ÿæ¶ˆå¤±ï¼Œæ›´æ¥è¿‘ã€Œã„…ã€
        m.rate = 0.9; 
        m.pitch = 1.0; 

        window.speechSynthesis.speak(m);
    }
</script>

</body>
</html>