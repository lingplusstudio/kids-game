<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>æ³¨éŸ³ç¬¦è™Ÿå¤§å†’éšª</title>
    <style>
        body { font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; background-color: #E1F5FE; text-align: center; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 30px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .main-title { color: #0288D1; font-size: 2.8rem; margin-bottom: 10px; }
        .sub-title { color: #4FC3F7; font-size: 1.2rem; margin-bottom: 25px; }
        
        #display-area { 
            font-size: 3rem; 
            margin: 30px auto; height: 180px; width: 80%;
            display: flex; align-items: center; justify-content: center; 
            color: #0288D1; border: 5px dashed #B3E5FC; border-radius: 20px;
            transition: font-size 0.2s; 
        }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 15px; padding: 20px; }
        .bo-btn { 
            aspect-ratio: 1; font-size: 2.5rem; cursor: pointer; border: none; 
            border-radius: 15px; background: #B3E5FC; color: #01579B;
            box-shadow: 0 5px #81D4FA; transition: 0.2s;
        }
        .bo-btn:active { transform: translateY(4px); box-shadow: 0 2px #81D4FA; }
        .bo-btn.vowel { background: #FFCC80; color: #E65100; box-shadow: 0 5px #FFB74D; }

        .home-btn-large {
            position: fixed; top: 20px; left: 20px;
            width: 85px; height: 85px; background-color: #9C27B0; 
            color: white; text-decoration: none; border-radius: 25px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            box-shadow: 0 8px #7B1FA2; transition: 0.2s; z-index: 9999; font-weight: bold;
        }
        .home-btn-large span { font-size: 2.2rem; margin-bottom: -5px; }
        .home-text { font-size: 1rem; }
        .home-btn-large:active { transform: translateY(4px); box-shadow: 0 4px #7B1FA2; }

        @media (max-width: 600px) { .container { margin-top: 100px; } }
    </style>
</head>
<body>

<a href="index.html" class="home-btn-large">
    <span>ğŸ </span>
    <div class="home-text">é¦–é </div>
</a>

<div class="container">
    <h1 class="main-title">ã„…ã„†ã„‡ æ³¨éŸ³å¤§å†’éšª</h1>
    <p class="sub-title">é»é»çœ‹ï¼Œè·Ÿè‘—è²éŸ³ä¸€èµ·å”¸å”¸çœ‹å–”ï¼</p>
    
    <div id="display-area">ğŸŒŸ é¸ä¸€å€‹æ³¨éŸ³ ğŸŒŸ</div>

    <div class="grid" id="bopomofo-grid"></div>
</div>

<script>
    const bopomofo = [
        'ã„…','ã„†','ã„‡','ã„ˆ','ã„‰','ã„Š','ã„‹','ã„Œ','ã„','ã„','ã„',
        'ã„','ã„‘','ã„’','ã„“','ã„”','ã„•','ã„–','ã„—','ã„˜','ã„™',
        'ã„§','ã„¨','ã„©','ã„š','ã„›','ã„œ','ã„','ã„','ã„Ÿ','ã„ ','ã„¡','ã„¢','ã„£','ã„¤','ã„¥','ã„¦'
    ];

    const grid = document.getElementById('bopomofo-grid');
    const display = document.getElementById('display-area');

    bopomofo.forEach((char, index) => {
        const btn = document.createElement('button');
        btn.innerText = char;
        btn.className = 'bo-btn';
        if (index >= 21) btn.classList.add('vowel');
        btn.onclick = () => {
            display.innerText = char;
            display.style.fontSize = "10rem"; 
            speak(char);
        };
        grid.appendChild(btn);
    });

    function speak(text) {
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance(text);
        const voices = window.speechSynthesis.getVoices();
        
        // å°‹æ‰¾ Zhiwei æˆ– iPad ç”·è² (æç‰§ã€å½¬å½¬ç­‰)
        let targetVoice = voices.find(v => v.name.includes("Zhiwei"));

        if (!targetVoice) {
            targetVoice = voices.find(v => 
                v.name.includes("æç‰§") || 
                v.name.includes("å½¬å½¬") || 
                v.name.includes("æ³¢æ³¢") ||
                v.name.includes("Male")
            );
        }

        if (targetVoice) msg.voice = targetVoice;
        msg.lang = 'zh-TW';
        msg.rate = 0.9; 
        msg.pitch = 1.0; 
        window.speechSynthesis.speak(msg);
    }

    // ä¿®æ­£è¼‰å…¥é‚è¼¯
    window.speechSynthesis.onvoiceschanged = () => {
        window.speechSynthesis.getVoices();
    };
// ğŸŒŸ åªè¦é»æ“Šç¶²é ä»»ä½•æŒ‰éˆ•æˆ–åœ°æ–¹ï¼Œå°±ç«‹åˆ»ä¸­æ–·èªéŸ³
    document.addEventListener('click', function(e) {
        // å¦‚æœé»æ“Šçš„æ˜¯ã€Œé‡è½ã€æŒ‰éˆ•ï¼Œæˆ‘å€‘ä¸å¸Œæœ›å®ƒå‰›åœå°±æ²’è²éŸ³
        // æ‰€ä»¥åˆ¤æ–·ï¼šé™¤éé»çš„æ˜¯é‡è½ï¼Œå¦å‰‡ä¸€å¾‹å…ˆåœæ‰èˆŠèªéŸ³
        if (!e.target.closest('#replay-btn')) { 
            window.speechSynthesis.cancel();
        }
    }, true);
</script> </body>
</html>